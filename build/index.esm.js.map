{"version":3,"file":"index.esm.js","sources":["../src/jsnview.js"],"sourcesContent":["function isObj (o) {\r\n  return o && typeof o === 'object' && o.constructor.name === 'Object'\r\n}\r\n\r\nfunction getType (value) {\r\n  let isFloat = Number(value) === value && value % 1 !== 0;\r\n  return isFloat ? 'float' : ({}).toString.call(value).match(/\\s([a-zA-Z]+)/)[1].toLowerCase();\r\n}\r\n\r\nfunction createEl (el) {\r\n  return document.createElement(el);\r\n}\r\n\r\nlet config = {\r\n  showLen: false,\r\n  showType: false,\r\n  colors: { boolean: '#ff2929', null: '#ff2929', string: '#690', number: '#905', float: '#002f99' }\r\n}\r\n\r\nexport default function jsnview (data, options) {\r\n  config = { ...config, ...options };\r\n  const root = createEl('ul');\r\n  root.classList.add('jsv')\r\n  createTree({ data }, root, true);\r\n  return root\r\n}\r\n\r\nfunction createTree (data, parentEl = null, isArray = false) {\r\n  let isOpen = false;\r\n\r\n  for (const key in data) {\r\n    const li = createEl('li'),\r\n      value = data[key],\r\n      isArr = Array.isArray(value);\r\n\r\n    if (isObj(value) || isArr) {\r\n      const startDel = createEl('span');\r\n      startDel.classList.add('fold', 'open');\r\n      startDel.textContent = (isArray ? \"\" : `\"${key}\": `) + (isArr ? \"[\" : \"{\");\r\n      li.appendChild(startDel);\r\n\r\n      if (config.showLen) {\r\n        const spanLen = createEl('span');\r\n        const len = isArr ? value.length : Object.keys(value).length;\r\n        spanLen.classList.add('len');\r\n        spanLen.textContent = `${len} items`;\r\n        li.appendChild(spanLen)\r\n      }\r\n\r\n      const ul = createEl('ul');\r\n      li.appendChild(ul);\r\n\r\n      if (isArr) {\r\n        const np = createEl('ul');\r\n        for (let i = 0; i < value.length; i++) {\r\n          createTree(value[i], np, true);\r\n        }\r\n      }\r\n\r\n      createTree(value, ul, isArr);\r\n\r\n      startDel.onclick = () => {\r\n        isOpen = !isOpen;\r\n        startDel.parentElement.querySelector('ul').style.display = isOpen ? 'none' : 'block';\r\n        startDel.classList.add(isOpen ? 'close' : 'open');\r\n        startDel.classList.remove(isOpen ? 'open' : 'close');\r\n      }\r\n\r\n      const endDel = createEl('span');\r\n      endDel.classList.add('fold');\r\n      endDel.textContent = isArr ? ']' : '}';\r\n      li.appendChild(endDel)\r\n      parentEl.appendChild(li);\r\n    }\r\n    else {\r\n      const spanVal = createEl('span'),\r\n        spanType = createEl('span'),\r\n        valType = getType(value);\r\n\r\n      spanVal.style.color = config.colors[valType];\r\n      spanVal.textContent = isNaN(value) ? `\"${value}\"` : value;\r\n\r\n      li.textContent += isArray ? \"\" : `\"${key}\": `;\r\n      li.appendChild(spanVal)\r\n\r\n      if (config.showType) {\r\n        spanType.classList.add('type');\r\n        spanType.textContent = `(${valType})`;\r\n        li.appendChild(spanType)\r\n      }\r\n\r\n      parentEl.appendChild(li)\r\n    }\r\n  }\r\n\r\n  return parentEl\r\n}\r\n"],"names":["getType","value","Number","toString","call","match","toLowerCase","createEl","el","document","createElement","config","showLen","showType","colors","boolean","null","string","number","float","jsnview","data","options","root","classList","add","createTree","parentEl","isArray","isOpen","key","li","isArr","Array","o","constructor","name","startDel","textContent","appendChild","spanLen","len","length","Object","keys","ul","np","i","onclick","parentElement","querySelector","style","display","remove","endDel","spanVal","spanType","valType","color","isNaN"],"mappings":"AAIA,SAASA,EAASC,GAEhB,OADcC,OAAOD,KAAWA,GAASA,EAAQ,GAAM,EACtC,QAAU,GAAKE,SAASC,KAAKH,GAAOI,MAAM,iBAAiB,GAAGC,cAGjF,SAASC,EAAUC,GACjB,OAAOC,SAASC,cAAcF,GAGhC,IAAIG,EAAS,CACXC,SAAS,EACTC,UAAU,EACVC,OAAQ,CAAEC,QAAS,UAAWC,KAAM,UAAWC,OAAQ,OAAQC,OAAQ,OAAQC,MAAO,YAGzE,SAASC,EAASC,EAAMC,GACrCX,EAAS,IAAKA,KAAWW,GACzB,MAAMC,EAAOhB,EAAS,MAGtB,OAFAgB,EAAKC,UAAUC,IAAI,OACnBC,EAAW,CAAEL,KAAAA,GAAQE,GAAM,GACpBA,EAGT,SAASG,EAAYL,EAAMM,EAAW,KAAMC,GAAU,GACpD,IAAIC,GAAS,EAEb,IAAK,MAAMC,KAAOT,EAAM,CACtB,MAAMU,EAAKxB,EAAS,MAClBN,EAAQoB,EAAKS,GACbE,EAAQC,MAAML,QAAQ3B,GAExB,IAnCYiC,EAmCFjC,IAlCa,iBAANiC,GAAyC,WAAvBA,EAAEC,YAAYC,MAkC7BJ,EAAO,CACzB,MAAMK,EAAW9B,EAAS,QAK1B,GAJA8B,EAASb,UAAUC,IAAI,OAAQ,QAC/BY,EAASC,aAAeV,EAAU,GAAK,IAAIE,SAAaE,EAAQ,IAAM,KACtED,EAAGQ,YAAYF,GAEX1B,EAAOC,QAAS,CAClB,MAAM4B,EAAUjC,EAAS,QACnBkC,EAAMT,EAAQ/B,EAAMyC,OAASC,OAAOC,KAAK3C,GAAOyC,OACtDF,EAAQhB,UAAUC,IAAI,OACtBe,EAAQF,YAAc,GAAGG,UACzBV,EAAGQ,YAAYC,GAGjB,MAAMK,EAAKtC,EAAS,MAGpB,GAFAwB,EAAGQ,YAAYM,GAEXb,EAAO,CACT,MAAMc,EAAKvC,EAAS,MACpB,IAAK,IAAIwC,EAAI,EAAGA,EAAI9C,EAAMyC,OAAQK,IAChCrB,EAAWzB,EAAM8C,GAAID,GAAI,GAI7BpB,EAAWzB,EAAO4C,EAAIb,GAEtBK,EAASW,QAAU,KACjBnB,GAAUA,EACVQ,EAASY,cAAcC,cAAc,MAAMC,MAAMC,QAAUvB,EAAS,OAAS,QAC7EQ,EAASb,UAAUC,IAAII,EAAS,QAAU,QAC1CQ,EAASb,UAAU6B,OAAOxB,EAAS,OAAS,UAG9C,MAAMyB,EAAS/C,EAAS,QACxB+C,EAAO9B,UAAUC,IAAI,QACrB6B,EAAOhB,YAAcN,EAAQ,IAAM,IACnCD,EAAGQ,YAAYe,GACf3B,EAASY,YAAYR,OAElB,CACH,MAAMwB,EAAUhD,EAAS,QACvBiD,EAAWjD,EAAS,QACpBkD,EAAUzD,EAAQC,GAEpBsD,EAAQJ,MAAMO,MAAQ/C,EAAOG,OAAO2C,GACpCF,EAAQjB,YAAcqB,MAAM1D,GAAS,IAAIA,KAAWA,EAEpD8B,EAAGO,aAAeV,EAAU,GAAK,IAAIE,OACrCC,EAAGQ,YAAYgB,GAEX5C,EAAOE,WACT2C,EAAShC,UAAUC,IAAI,QACvB+B,EAASlB,YAAc,IAAImB,KAC3B1B,EAAGQ,YAAYiB,IAGjB7B,EAASY,YAAYR,IA3F3B,IAAgBG,EA+Fd,OAAOP"}