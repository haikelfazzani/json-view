{"version":3,"file":"index.esm.js","sources":["../src/jsnview.js"],"sourcesContent":["function isObj(o) {\n  return o && typeof o === 'object' && o.constructor.name === 'Object'\n}\n\nfunction getType(value) {\n  let isFloat = Number(value) === value && value % 1 !== 0;\n  return isFloat ? 'float' : ({}).toString.call(value).match(/\\s([a-zA-Z]+)/)[1].toLowerCase();\n}\n\nfunction createEl(el) {\n  return document.createElement(el);\n}\n\nlet config = {\n  showLen: false,\n  showType: false,\n  showBrackets: true,\n  showFoldmarker: true,\n  colors: { boolean: '#ff2929', null: '#ff2929', string: '#690', number: '#905', float: '#002f99' }\n}\n\nexport default function jsnview(data, options) {\n  config = { ...config, ...options };\n  const root = createEl('ul');\n  root.classList.add('jsv')\n  createTree({ data }, root, true);\n  return root\n}\n\nfunction createTree(data, parentEl = null, isArray = false) {\n  \n  for (const key in data) {\n    const li = createEl('li'),\n    value = data[key],\n    isArr = Array.isArray(value);\n    \n    if (isObj(value) || isArr) {\n      let isOpen = false;\n      const startDel = createEl('span');\n      startDel.classList.add('fold', 'open');\n      startDel.setAttribute('data-before', \"▾\");\n      startDel.setAttribute('data-close', \"▸\");\n      if(config.showFoldmarker) startDel.setAttribute('data-after', \"↔\");\n\n      startDel.textContent = config.showBrackets ? (isArray ? \"\" : `\"${key}\": `) + (isArr ? \"[\" : \"{\") : '';\n      li.appendChild(startDel);\n\n      if (config.showLen) {\n        const spanLen = createEl('span');\n        const len = isArr ? value.length : Object.keys(value).length;\n        spanLen.classList.add('len');\n        spanLen.textContent = `{${len}}`;\n        li.appendChild(spanLen)\n      }\n\n      const ul = createEl('ul');\n      li.appendChild(ul);\n\n      if (isArr) {\n        const np = createEl('ul');\n        for (let i = 0; i < value.length; i++) {\n          createTree(value[i], np, true);\n        }\n      }\n\n      createTree(value, ul, isArr);\n      \n      startDel.onclick = () => {\n        isOpen = !isOpen;\n        startDel.parentElement.querySelector('ul').style.display = isOpen ? 'none' : 'block';\n        startDel.classList.add(isOpen ? 'close' : 'open');\n        startDel.classList.remove(isOpen ? 'open' : 'close');\n      }\n      \n      const endDel = createEl('span');\n      endDel.classList.add('fold');\n      endDel.textContent = !config.showBrackets ? '' : isArr ? ']' : '}';\n      li.appendChild(endDel)\n      parentEl.appendChild(li);\n    }\n    else {\n      const spanVal = createEl('span'),\n        spanType = createEl('span'),\n        valType = getType(value);\n\n      spanVal.style.color = config.colors[valType];\n      spanVal.textContent = isNaN(value) ? `\"${value}\"` : value;\n\n      li.textContent += isArray ? \"\" : `\"${key}\": `;\n      li.appendChild(spanVal)\n\n      if (config.showType) {\n        spanType.classList.add('type');\n        spanType.textContent = `(${valType})`;\n        li.appendChild(spanType)\n      }\n\n      parentEl.appendChild(li)\n    }\n  }\n\n  return parentEl\n}\n"],"names":["getType","value","Number","toString","call","match","toLowerCase","createEl","el","document","createElement","config","showLen","showType","showBrackets","showFoldmarker","colors","boolean","null","string","number","float","jsnview","data","options","root","classList","add","createTree","parentEl","isArray","key","li","isArr","Array","o","constructor","name","isOpen","startDel","setAttribute","textContent","appendChild","spanLen","len","length","Object","keys","ul","np","i","onclick","parentElement","querySelector","style","display","remove","endDel","spanVal","spanType","valType","color","isNaN"],"mappings":"AAIA,SAASA,EAAQC,GAEf,OADcC,OAAOD,KAAWA,GAASA,EAAQ,GAAM,EACtC,QAAU,GAAKE,SAASC,KAAKH,GAAOI,MAAM,iBAAiB,GAAGC,cAGjF,SAASC,EAASC,GAChB,OAAOC,SAASC,cAAcF,GAGhC,IAAIG,EAAS,CACXC,SAAS,EACTC,UAAU,EACVC,cAAc,EACdC,gBAAgB,EAChBC,OAAQ,CAAEC,QAAS,UAAWC,KAAM,UAAWC,OAAQ,OAAQC,OAAQ,OAAQC,MAAO,YAGzE,SAASC,EAAQC,EAAMC,GACpCb,EAAS,IAAKA,KAAWa,GACzB,MAAMC,EAAOlB,EAAS,MAGtB,OAFAkB,EAAKC,UAAUC,IAAI,OACnBC,EAAW,CAAEL,KAAAA,GAAQE,GAAM,GACpBA,EAGT,SAASG,EAAWL,EAAMM,EAAW,KAAMC,GAAU,GAEnD,IAAK,MAAMC,KAAOR,EAAM,CACtB,MAAMS,EAAKzB,EAAS,MACpBN,EAAQsB,EAAKQ,GACbE,EAAQC,MAAMJ,QAAQ7B,GAEtB,IApCWkC,EAoCDlC,IAnCa,iBAANkC,GAAyC,WAAvBA,EAAEC,YAAYC,MAmC7BJ,EAAO,CACzB,IAAIK,GAAS,EACb,MAAMC,EAAWhC,EAAS,QAS1B,GARAgC,EAASb,UAAUC,IAAI,OAAQ,QAC/BY,EAASC,aAAa,cAAe,KACrCD,EAASC,aAAa,aAAc,KACjC7B,EAAOI,gBAAgBwB,EAASC,aAAa,aAAc,KAE9DD,EAASE,YAAc9B,EAAOG,cAAgBgB,EAAU,GAAK,IAAIC,SAAaE,EAAQ,IAAM,KAAO,GACnGD,EAAGU,YAAYH,GAEX5B,EAAOC,QAAS,CAClB,MAAM+B,EAAUpC,EAAS,QACnBqC,EAAMX,EAAQhC,EAAM4C,OAASC,OAAOC,KAAK9C,GAAO4C,OACtDF,EAAQjB,UAAUC,IAAI,OACtBgB,EAAQF,YAAc,IAAIG,KAC1BZ,EAAGU,YAAYC,GAGjB,MAAMK,EAAKzC,EAAS,MAGpB,GAFAyB,EAAGU,YAAYM,GAEXf,EAAO,CACT,MAAMgB,EAAK1C,EAAS,MACpB,IAAK,IAAI2C,EAAI,EAAGA,EAAIjD,EAAM4C,OAAQK,IAChCtB,EAAW3B,EAAMiD,GAAID,GAAI,GAI7BrB,EAAW3B,EAAO+C,EAAIf,GAEtBM,EAASY,QAAU,KACjBb,GAAUA,EACVC,EAASa,cAAcC,cAAc,MAAMC,MAAMC,QAAUjB,EAAS,OAAS,QAC7EC,EAASb,UAAUC,IAAIW,EAAS,QAAU,QAC1CC,EAASb,UAAU8B,OAAOlB,EAAS,OAAS,UAG9C,MAAMmB,EAASlD,EAAS,QACxBkD,EAAO/B,UAAUC,IAAI,QACrB8B,EAAOhB,YAAe9B,EAAOG,aAAoBmB,EAAQ,IAAM,IAAnB,GAC5CD,EAAGU,YAAYe,GACf5B,EAASa,YAAYV,OAElB,CACH,MAAM0B,EAAUnD,EAAS,QACvBoD,EAAWpD,EAAS,QACpBqD,EAAU5D,EAAQC,GAEpByD,EAAQJ,MAAMO,MAAQlD,EAAOK,OAAO4C,GACpCF,EAAQjB,YAAcqB,MAAM7D,GAAS,IAAIA,KAAWA,EAEpD+B,EAAGS,aAAeX,EAAU,GAAK,IAAIC,OACrCC,EAAGU,YAAYgB,GAEX/C,EAAOE,WACT8C,EAASjC,UAAUC,IAAI,QACvBgC,EAASlB,YAAc,IAAImB,KAC3B5B,EAAGU,YAAYiB,IAGjB9B,EAASa,YAAYV,IAjG3B,IAAeG,EAqGb,OAAON"}