{"version":3,"file":"index.esm.js","sources":["../src/jsnview.js"],"sourcesContent":["export default function jsnview (data) {\r\n  let rootElement = document.createElement('ul');\r\n  rootElement.classList.add('jsv', 'p-0', 'm-0');\r\n\r\n  if (Array.isArray(data)) {\r\n    const ul = document.createElement('ul');\r\n    data.forEach(obj => {\r\n      render(ul, obj, null);\r\n    });\r\n\r\n    rootElement.prepend(createSpanFold('[', null, null, ul.children.length));\r\n    rootElement.appendChild(ul);\r\n    rootElement.appendChild(createSpanFold(null, ']', null));\r\n  }\r\n  else {\r\n    render(rootElement, data, null);\r\n  }\r\n\r\n  rootElement.addEventListener('click', (e) => {\r\n\r\n    let target = e.target, parentTarget = target.parentNode;\r\n\r\n    if (parentTarget.nodeName === 'LI' && target.classList.contains('jsv-fold')) {\r\n\r\n      let isClosed = target.classList.contains('jsv-fold-close');\r\n\r\n      [...parentTarget.children].forEach(c => {\r\n        if (!c.classList.contains('jsv-fold') && !c.classList.contains('jsv-fold-end')) {\r\n          c.style.display = isClosed ? 'block' : 'none';\r\n        }\r\n      });\r\n\r\n      target.classList.toggle('jsv-fold-close');\r\n      parentTarget.style.display = isClosed ? 'block' : 'flex';\r\n    }\r\n  }, false);\r\n\r\n  return rootElement;\r\n}\r\n\r\nfunction render (rootElement, obj, parentKey) {\r\n\r\n  const ul = document.createElement('ul');\r\n\r\n  for (let [key, value] of Object.entries(obj)) {\r\n    if (!isObj(value) && !Array.isArray(value)) {\r\n      createListItems(ul, value, key)\r\n    }\r\n\r\n    if (Array.isArray(value)) {\r\n      createArr(ul, value, key, false);\r\n    }\r\n\r\n    if (isObj(value)) {\r\n      render(ul, value, key);\r\n    }\r\n  }\r\n\r\n  const li = document.createElement('li');\r\n  li.appendChild(createSpanFold('{', null, parentKey, ul.children.length));\r\n  li.appendChild(ul);\r\n  li.appendChild(createSpanFold(null, '}', null));\r\n  rootElement.appendChild(li);\r\n}\r\n\r\nfunction createArr (rootElement, arr, key) {\r\n  const ul = document.createElement('ul');\r\n\r\n  arr.forEach(value => {\r\n    createListItems(ul, value, null);\r\n  });\r\n\r\n  const li = document.createElement('li');\r\n  li.appendChild(createSpanFold('[', null, key, ul.children.length));\r\n  li.appendChild(ul);\r\n  li.appendChild(createSpanFold(null, ']', key));\r\n  rootElement.appendChild(li)\r\n}\r\n\r\nfunction createListItems (parentElement, value, key) {\r\n  const li = document.createElement('li');\r\n  if (Array.isArray(value)) {\r\n    createArr(parentElement, value, null);\r\n  }\r\n  if (isObj(value)) {\r\n    render(parentElement, value, null);\r\n  }\r\n  if (!isObj(value) && !Array.isArray(value)) {\r\n    let typeValue = typeof value;\r\n\r\n    if (typeValue === 'number') {\r\n      typeValue = isFloatOrNumber(value) ? 'float' : 'number'\r\n    }\r\n\r\n    if (key) {\r\n      li.innerHTML = typeValue === 'string'\r\n        ? `\"${key}\": <span class=\"txt-${typeValue}\">\"${value}\"</span>,`\r\n        : `\"${key}\": <span class=\"txt-${typeValue}\">${value}</span>,`;\r\n    }\r\n    else {\r\n      li.innerHTML = typeValue === 'string'\r\n        ? `<span class=\"txt-${typeValue}\">\"${value}\"</span>,`\r\n        : `<span class=\"txt-${typeValue}\">${value}</span>,`;\r\n    }\r\n\r\n    parentElement.appendChild(li);\r\n  }\r\n}\r\n\r\nfunction isObj (o) {\r\n  return o != null && o.constructor.name === \"Object\"\r\n}\r\n\r\nfunction isFloatOrNumber (value) {\r\n  return Number(value) === value && value % 1 !== 0\r\n}\r\n\r\nfunction createSpanFold (startDelimiter, endDelimiter, key, itemsLen = 0) {\r\n  const span = document.createElement('span');\r\n\r\n  if (startDelimiter) {\r\n    span.classList.add('jsv-fold');\r\n    span.innerHTML = key\r\n      ? `\"${key}\": ${startDelimiter} <span class=\"txt-mute mr-10\">${itemsLen} items</span>`\r\n      : ` ${startDelimiter} <span class=\"txt-mute mr-10\">${itemsLen} items</span>`;\r\n  }\r\n  else {\r\n    span.classList.add('jsv-fold-end');\r\n    span.innerHTML = endDelimiter;\r\n  }\r\n\r\n  return span;\r\n}"],"names":["jsnview","data","rootElement","document","createElement","classList","add","Array","isArray","ul","forEach","obj","render","prepend","createSpanFold","children","length","appendChild","addEventListener","e","target","parentTarget","parentNode","nodeName","contains","isClosed","c","style","display","toggle","parentKey","key","value","Object","entries","isObj","createListItems","createArr","li","arr","parentElement","typeValue","Number","isFloatOrNumber","innerHTML","o","constructor","name","startDelimiter","endDelimiter","itemsLen","span"],"mappings":"AAAe,SAASA,EAASC,GAC/B,IAAIC,EAAcC,SAASC,cAAc,MAGzC,GAFAF,EAAYG,UAAUC,IAAI,MAAO,MAAO,OAEpCC,MAAMC,QAAQP,GAAO,CACvB,MAAMQ,EAAKN,SAASC,cAAc,MAClCH,EAAKS,SAAQC,IACXC,EAAOH,EAAIE,EAAK,SAGlBT,EAAYW,QAAQC,EAAe,IAAK,KAAM,KAAML,EAAGM,SAASC,SAChEd,EAAYe,YAAYR,GACxBP,EAAYe,YAAYH,EAAe,KAAM,IAAK,YAGlDF,EAAOV,EAAaD,EAAM,MAsB5B,OAnBAC,EAAYgB,iBAAiB,SAAUC,IAErC,IAAIC,EAASD,EAAEC,OAAQC,EAAeD,EAAOE,WAE7C,GAA8B,OAA1BD,EAAaE,UAAqBH,EAAOf,UAAUmB,SAAS,YAAa,CAE3E,IAAIC,EAAWL,EAAOf,UAAUmB,SAAS,kBAEzC,IAAIH,EAAaN,UAAUL,SAAQgB,IAC5BA,EAAErB,UAAUmB,SAAS,aAAgBE,EAAErB,UAAUmB,SAAS,kBAC7DE,EAAEC,MAAMC,QAAUH,EAAW,QAAU,WAI3CL,EAAOf,UAAUwB,OAAO,kBACxBR,EAAaM,MAAMC,QAAUH,EAAW,QAAU,WAEnD,GAEIvB,EAGT,SAASU,EAAQV,EAAaS,EAAKmB,GAEjC,MAAMrB,EAAKN,SAASC,cAAc,MAElC,IAAK,IAAK2B,EAAKC,KAAUC,OAAOC,QAAQvB,GACjCwB,EAAMH,IAAWzB,MAAMC,QAAQwB,IAClCI,EAAgB3B,EAAIuB,EAAOD,GAGzBxB,MAAMC,QAAQwB,IAChBK,EAAU5B,EAAIuB,EAAOD,GAGnBI,EAAMH,IACRpB,EAAOH,EAAIuB,EAAOD,GAItB,MAAMO,EAAKnC,SAASC,cAAc,MAClCkC,EAAGrB,YAAYH,EAAe,IAAK,KAAMgB,EAAWrB,EAAGM,SAASC,SAChEsB,EAAGrB,YAAYR,GACf6B,EAAGrB,YAAYH,EAAe,KAAM,IAAK,OACzCZ,EAAYe,YAAYqB,GAG1B,SAASD,EAAWnC,EAAaqC,EAAKR,GACpC,MAAMtB,EAAKN,SAASC,cAAc,MAElCmC,EAAI7B,SAAQsB,IACVI,EAAgB3B,EAAIuB,EAAO,SAG7B,MAAMM,EAAKnC,SAASC,cAAc,MAClCkC,EAAGrB,YAAYH,EAAe,IAAK,KAAMiB,EAAKtB,EAAGM,SAASC,SAC1DsB,EAAGrB,YAAYR,GACf6B,EAAGrB,YAAYH,EAAe,KAAM,IAAKiB,IACzC7B,EAAYe,YAAYqB,GAG1B,SAASF,EAAiBI,EAAeR,EAAOD,GAC9C,MAAMO,EAAKnC,SAASC,cAAc,MAOlC,GANIG,MAAMC,QAAQwB,IAChBK,EAAUG,EAAeR,EAAO,MAE9BG,EAAMH,IACRpB,EAAO4B,EAAeR,EAAO,OAE1BG,EAAMH,KAAWzB,MAAMC,QAAQwB,GAAQ,CAC1C,IAAIS,SAAmBT,EAEL,WAAdS,IACFA,EAsBN,SAA0BT,GACxB,OAAOU,OAAOV,KAAWA,GAASA,EAAQ,GAAM,EAvBhCW,CAAgBX,GAAS,QAAU,UAI/CM,EAAGM,UADDb,EAC2B,WAAdU,EACX,IAAIV,wBAA0BU,OAAeT,aAC7C,IAAID,wBAA0BU,MAAcT,YAGnB,WAAdS,EACX,oBAAoBA,OAAeT,aACnC,oBAAoBS,MAAcT,YAGxCQ,EAAcvB,YAAYqB,IAI9B,SAASH,EAAOU,GACd,OAAY,MAALA,GAAoC,WAAvBA,EAAEC,YAAYC,KAOpC,SAASjC,EAAgBkC,EAAgBC,EAAclB,EAAKmB,EAAW,GACrE,MAAMC,EAAOhD,SAASC,cAAc,QAapC,OAXI4C,GACFG,EAAK9C,UAAUC,IAAI,YACnB6C,EAAKP,UAAYb,EACb,IAAIA,OAASiB,kCAA+CE,iBAC5D,IAAIF,kCAA+CE,mBAGvDC,EAAK9C,UAAUC,IAAI,gBACnB6C,EAAKP,UAAYK,GAGZE"}